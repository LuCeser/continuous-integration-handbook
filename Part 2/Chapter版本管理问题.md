在实践持续集成的过程中，分支的管理是绕不开的一项，没有良好的分支管理策略对于我们的开发，以及后续的集成都会成为很大的问题。

好了，先思考一个问题：我们为什么需要分支？

三个理由。

第一，为了开发人员能够不断开发新功能，而不会影响稳定的对外发布版本

假设我们在一个已经存在的项目上进行开发，而且我们的项目只有master和dev两个分支，平时在dev分支开发新功能，master分支表示最近的稳定发布分支。

第二，需要一次重构或调研一个新功能时，这个分支很可能会被废弃而不会合并会主干分支。

最理想的状态是我们平时在dev分支进行开发，本地测试完成之后合并到master分支进行集成。但现实情况往往都不是那么理想，比如以下几种场景。

**dev开发在本地测试通过，但交付测试后测试未通过**

这种情况下我们首先需要确定的是，交付给测试的是哪一个分支所构建的版本？如果定义master分支是稳定发布版本，那么必然是测试已经测试通过之后才能合并到master，如果是dev分支，则可能出现开发在交付测试之后已经继续开发后续功能了，那么测试提交的问题有可能已经被修改了，而出现问题的版本也不是开发当前的分支了。

**线上运行时候发现的bug，需要紧急修复**

在上线后发现的bug常常是无法避免的，而且某些紧急的bug是需要紧急上线，而当前的测试分支与开发分支早就已经往前走了，那么这种情况下我们要怎么处理呢？

我认为比较好一点方法创建从master分支来创建hotfix分支，但是修复bug后提交后的流程是什么样的？最好的方法是hotfix与test分支设置为同一个等级，打包部署测试通过后，需要项目负责人集成到dev、test分支。

 

解决分支管理的难题

第一步就是保证在多人同时开发的时候，代码尽量不要冲突，所以每天早上上班时都要pull一下代码，保证当天仓库是最新版本。

定义分支

master:  主线分支，也称之为集成分支，特点在于主线分支的状态一直都是可集成的